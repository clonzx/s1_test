<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Unity WebGL Player | Bots and Towers Beginning</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    <script src="TemplateData/SoonProgress.js"></script>  
    <script src="Build/UnityLoader.js"></script>
    <script>
      var gameInstance = UnityLoader.instantiate("gameContainer", "Build/BntGL.json", {onProgress: UnityProgress});
    </script>
<script type="text/javascript" src="https://vkontakte.ru/js/api/xd_connection.js?2"></script>
  </head>
  <body>
    <div class="webgl-content">
      <div id="gameContainer" style="width: 100px; height: 60px"></div>
      <img id="PreLoadImg" src="TemplateData/zastavka.jpg" width="1000" height="600"/>
      <div class="footer">
        <div class="webgl-logo"></div>
	<div><input type="text" name="pasteTo" id="pasteTo" style="display:none;"> <input id="insertButton" type="button" value="insert 2 Studio" onclick="pasteTo()"></div>
        <div class="fullscreen" onclick="gameInstance.SetFullscreen(1)"></div>
        <div class="title">Bots and Towers Beginning</div>
      </div>
    </div>


<script type="text/javascript" language="javascript">
<!--
function pasteTo() {
var gamecon = document.getElementById("gameContainer");
gamecon.style='width: 1000px; height: 600px';

//    var str = document.getElementById("pasteTo").value;
//	SendMessage("Main", "pasteTo", str);
//	SendMessage("GO", "pasteTo", str);	
	
//	alert(str);
}

function Code(txt,key,callback)
{
inpdata=escape(txt); 
outdata="";
passwd=key;
encodeblowfish();
   
    SendMessage("GO", callback, outdata);
}
function Decode(txt,key,callback)
{
inpdata=txt;
outdata="";
passwd=key;
decodeblowfish();
outdata=unescape(outdata);   
    SendMessage("GO", callback, outdata);
}



 function order(iname) {
    var params = {
      type: 'item',
      item: iname
    };
    VK.callMethod('showOrderBox', params);
  }

  var callbacksResults = document.getElementById('callbacks');

  VK.addCallback('onOrderSuccess', onOrderSuccess);
  VK.addCallback('onOrderFail', onOrderFail);
  VK.addCallback('onOrderCancel', onOrderCancel);
  VK.addCallback('onToggleFlash',onToggleFlash);
  VK.addCallback('onWindowFocus',onWindowFocus);
  VK.addCallback('onWindowBlur',onWindowBlur);
  

function onWindowBlur()
{
  document.getElementById('gameContainer').style.visibility = 'hidden';
}

function onWindowFocus()
{
  document.getElementById('gameContainer').style.visibility = 'visible';
}

function onToggleFlash(show)
{
  var  unity =document.getElementById('gameContainer');
  if (show)
    unity.style.visibility = 'visible';
  else
    unity.style.visibility = 'hidden';
}


function onOrderSuccess(order_id)
{
   document.getElementById('gameContainer').style.visibility = 'visible';
   SendMessage("GO", "OrderCallback", order_id);
}


function onOrderFail(error)
{
   document.getElementById('gameContainer').style.visibility = 'visible';
   SendMessage("GO", "OrderCallback", 0);  

}

function onOrderCancel()
{
   document.getElementById('gameContainer').style.visibility = 'visible';
   SendMessage("GO", "OrderCallback", 0);  
}

function SyncFiles()
{
 FS.syncfs(false,function (err) {
     //alert('syncing fs');
 });
}
-->
</script>

  </body>
</html>